<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Index - กึ่งกลางธีม มทส.</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    font-family: Arial, sans-serif;
    background: #ffffff;
    color: #555555;
    overflow: hidden;
    display: flex;
    justify-content: center;  /* แนวนอนกึ่งกลาง */
    align-items: center;      /* แนวตั้งกึ่งกลาง */
  }
  #wrapper {
    text-align: center;
    max-width: 600px;
    padding: 20px;
    box-sizing: border-box;
  }
  #hiSticker {
    width: 180px;
    height: auto;
    user-select: none;
    margin: 0 auto 15px auto;
    display: block;
  }
  #introText {
    font-size: 22px;
    margin-bottom: 20px;
    line-height: 1.4;
  }
  #introText h1 {
    color: rgb(242, 101, 34); /* ส้ม */
    margin-bottom: 0.2em;
    font-weight: bold;
  }
  #introText h4 {
    color: rgb(109, 110, 112); /* เทา */
    margin-top: 0.1em;
  }
  #container {
    font-size: 24px;
    color: #555555;
    user-select: none;
  }
  #giftExplode {
    position: fixed;
    top: 50%; left: 50%;
    width: 300px;
    height: 300px;
    transform: translate(-50%, -50%);
    z-index: 20;
  }
</style>
</head>
<body>

<img id="giftExplode" src="Gift.gif" alt="Gift Explode Animation" />

<div id="wrapper" style="display:none;">
  <img id="hiSticker" src="Hi2.gif" alt="เด็กน้อยสติ๊กเกอร์" />
  <div id="introText">
    <h1>
      สวัสดีครับ<br>
      พี่ชื่อ ก๊อต มาจากมหาวิทยาลัยเทคโนโลยีสุรนารี
    </h1>
    <h4>
      วันนี้พี่อยากมาแบ่งปันประสบการณ์ตรงเกี่ยวกับชีวิตและการเรียนที่นี่<br>
      ผ่านเรื่องราวของผมเอง เพื่อให้น้องๆ ได้เห็นภาพและเตรียมตัวได้ดีขึ้นครับ/ค่ะ
    </h4>
  </div>
  <div id="container">
    หน้าหลัก (index.html)<br>Swipe to navigate (Left, Right, Up, Down)
  </div>
</div>

<script>
  const giftExplode = document.getElementById('giftExplode');
  const wrapper = document.getElementById('wrapper');

  function getReferrerPage() {
    try {
      const ref = document.referrer;
      if (!ref) return null;
      const url = new URL(ref);
      const path = url.pathname.toLowerCase();
      if (path.endsWith('left.html')) return 'left';
      if (path.endsWith('right.html')) return 'right';
      if (path.endsWith('up.html')) return 'up';
      if (path.endsWith('down.html')) return 'down';
      return null;
    } catch {
      return null;
    }
  }

  function playEntryAnimation(fromDirection) {
    return new Promise((resolve) => {
      resolve();
    });
  }

  window.addEventListener('load', async () => {
    const refPage = getReferrerPage();

    giftExplode.style.display = 'block';
    wrapper.style.display = 'none';

    setTimeout(async () => {
      giftExplode.style.display = 'none';

      wrapper.style.display = 'block';

      await playEntryAnimation(refPage);
    }, 4000);
  });

  function navigateTo(url, direction) {
    window.location.href = url;
  }

  let touchStartX = 0, touchStartY = 0;
  const threshold = 50;

  window.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
    touchStartY = e.changedTouches[0].screenY;
  }, {passive:true});

  window.addEventListener('touchend', e => {
    const touchEndX = e.changedTouches[0].screenX;
    const touchEndY = e.changedTouches[0].screenY;
    const diffX = touchEndX - touchStartX;
    const diffY = touchEndY - touchStartY;
    if(Math.abs(diffX) > Math.abs(diffY)) {
      if(diffX > threshold) navigateTo('right.html', 'right');
      else if(diffX < -threshold) navigateTo('left.html', 'left');
    } else {
      if(diffY > threshold) navigateTo('down.html', 'down');
      else if(diffY < -threshold) navigateTo('up.html', 'up');
    }
  }, {passive:true});

  window.addEventListener('keydown', e => {
    switch(e.key) {
      case 'ArrowLeft': navigateTo('left.html', 'left'); break;
      case 'ArrowRight': navigateTo('right.html', 'right'); break;
      case 'ArrowUp': navigateTo('up.html', 'up'); break;
      case 'ArrowDown': navigateTo('down.html', 'down'); break;
    }
  });
</script>

</body>
</html>
